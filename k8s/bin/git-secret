#!/usr/local/env bash

if [ -z "$1" ] ; then echo enter namespace ; exit 1 ; fi
if [ -z "$2" ] ; then echo "enter git host (ex. github.com)" ; exit 1 ; fi

NAMESPACE=$1
GIT_URL=$2

ssh-keyscan "$GIT_URL" > /tmp/known_hosts
kubectl create secret -n "$NAMESPACE" generic git-creds --from-file=ssh="$HOME"/.ssh/id_rsa --from-file=known_hosts=/tmp/known_hosts

